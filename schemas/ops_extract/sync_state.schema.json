{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ops_extract sync state",
  "type": "object",
  "required": [
    "schema_version",
    "version",
    "state",
    "uploaded_files",
    "pending_files",
    "failed_files",
    "retries",
    "resume_count",
    "last_error",
    "dry_run",
    "manifest_committed_drive",
    "last_attempt_at"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "minLength": 1
    },
    "version": {
      "type": "string",
      "minLength": 1
    },
    "state": {
      "type": "string"
    },
    "uploaded_files": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "path",
          "size",
          "sha256"
        ],
        "properties": {
          "path": {
            "type": "string"
          },
          "size": {
            "type": "integer"
          },
          "sha256": {
            "type": "string"
          },
          "file_id": {
            "type": "string"
          },
          "session_uri": {
            "type": "string"
          },
          "verified": {
            "type": "boolean"
          },
          "attempts": {
            "type": "integer"
          }
        },
        "additionalProperties": true
      }
    },
    "pending_files": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "failed_files": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "type": "string"
          },
          "error": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "retries": {
      "type": "integer"
    },
    "resume_count": {
      "type": "integer"
    },
    "last_error": {
      "type": "string"
    },
    "dry_run": {
      "type": "boolean"
    },
    "manifest_committed_drive": {
      "type": "boolean"
    },
    "last_attempt_at": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
