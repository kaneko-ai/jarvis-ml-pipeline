{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ops_extract run metadata",
  "type": "object",
  "required": [
    "schema_version",
    "run_id",
    "project",
    "mode",
    "created_at",
    "finished_at",
    "status",
    "config",
    "preflight"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "minLength": 1
    },
    "run_id": {
      "type": "string"
    },
    "project": {
      "type": "string"
    },
    "mode": {
      "type": "string"
    },
    "created_at": {
      "type": "string"
    },
    "finished_at": {
      "type": "string"
    },
    "status": {
      "type": "string"
    },
    "config": {
      "type": "object"
    },
    "preflight": {
      "type": "object",
      "required": [
        "passed",
        "errors",
        "warnings",
        "checks"
      ],
      "properties": {
        "passed": {
          "type": "boolean"
        },
        "errors": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "warnings": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "checks": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "name",
              "ok",
              "detail",
              "hard",
              "configured_hard"
            ],
            "properties": {
              "name": {
                "type": "string"
              },
              "ok": {
                "type": "boolean"
              },
              "detail": {
                "type": "string"
              },
              "hard": {
                "type": "boolean"
              },
              "configured_hard": {
                "type": "boolean"
              }
            },
            "additionalProperties": true
          }
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
