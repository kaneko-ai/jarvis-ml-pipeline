# GitHub Actions å®Ÿè¡Œã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€JARVISãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä½¿ã„æ–¹ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

---

## ç›®æ¬¡

1. [å‰ææ¡ä»¶](#1-å‰ææ¡ä»¶)
2. [å¤‰æ›´ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹](#2-å¤‰æ›´ã‚’githubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹)
3. [ãƒ•ãƒ«E2Eç’°å¢ƒãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ](#3-ãƒ•ãƒ«e2eç’°å¢ƒãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ)
4. [GitHub Pagesãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç¢ºèª](#4-github-pagesãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç¢ºèª)
5. [æ—¥æ¬¡ãƒ»é€±æ¬¡ã‚¸ãƒ§ãƒ–ã®ç¢ºèª](#5-æ—¥æ¬¡é€±æ¬¡ã‚¸ãƒ§ãƒ–ã®ç¢ºèª)
6. [æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œ](#6-æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œ)
7. [ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµæœç¢ºèª](#7-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµæœç¢ºèª)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#8-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## 1. å‰ææ¡ä»¶

### å¿…è¦ãªã‚‚ã®
- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ãƒ—ãƒƒã‚·ãƒ¥æ¨©é™
- Git ãŒãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹

### ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šï¼ˆåˆå›ã®ã¿ï¼‰

1. **GitHub Pages ã‚’æœ‰åŠ¹åŒ–**
   - ãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ â†’ Settings â†’ Pages
   - Source: `GitHub Actions` ã‚’é¸æŠ
   - Save

2. **Environments ã‚’ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**
   - Settings â†’ Environments
   - `staging` ã¨ `production` ã‚’ä½œæˆ

---

## 2. å¤‰æ›´ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 2.1: å¤‰æ›´ã‚’ç¢ºèª
```powershell
cd "c:\Users\kaneko yu\Documents\jarvis-work\jarvis-ml-pipeline"

# å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
git status
```

### ã‚¹ãƒ†ãƒƒãƒ— 2.2: å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
```powershell
# ã™ã¹ã¦ã®å¤‰æ›´ã‚’è¿½åŠ 
git add .

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¿½åŠ ã™ã‚‹å ´åˆ
git add .github/workflows/*.yml
git add jarvis_core/
git add docs/
```

### ã‚¹ãƒ†ãƒƒãƒ— 2.3: ã‚³ãƒŸãƒƒãƒˆ
```powershell
git commit -m "Add infrastructure and GitHub workflows"
```

### ã‚¹ãƒ†ãƒƒãƒ— 2.4: ãƒ—ãƒƒã‚·ãƒ¥
```powershell
# mainãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin main

# åˆå›ã®å ´åˆ
git push -u origin main
```

### ã‚¹ãƒ†ãƒƒãƒ— 2.5: èªè¨¼ï¼ˆå¿…è¦ãªå ´åˆï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å: GitHubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: Personal Access Token (PAT)
  - GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens ã§ä½œæˆ

---

## 3. ãƒ•ãƒ«E2Eç’°å¢ƒãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€PostgreSQL + Redis + Qdrant ã‚’ GitHub ã®ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§èµ·å‹•ã—ã€ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 3.1: Actionsãƒšãƒ¼ã‚¸ã‚’é–‹ã
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `https://github.com/ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å/jarvis-ml-pipeline` ã‚’é–‹ã
2. ã€Œ**Actions**ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ— 3.2: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
1. å·¦å´ã®ãƒªã‚¹ãƒˆã‹ã‚‰ã€Œ**Full Environment**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³å´ã«å®Ÿè¡Œå±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 3.3: æ‰‹å‹•å®Ÿè¡Œ
1. ã€Œ**Run workflow**ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ˆå³ä¸Šã®ç·‘è‰²ï¼‰
2. ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹:
   - Branch: `main` ã‚’é¸æŠ
   - Run E2E tests: `true` ã®ã¾ã¾
3. ã€Œ**Run workflow**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ— 3.4: å®Ÿè¡Œã‚’ç¢ºèª
1. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
2. æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’ç¢ºèª

### å®Ÿè¡Œå†…å®¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Actions Runner (Ubuntu)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚PostgreSQLâ”‚ â”‚  Redis  â”‚ â”‚ Qdrant  â”‚        â”‚
â”‚ â”‚  :5432   â”‚ â”‚  :6379  â”‚ â”‚  :6333  â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ JARVIS ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ                       â”‚ â”‚
â”‚ â”‚ - pytest -m core                        â”‚ â”‚
â”‚ â”‚ - ã‚«ãƒãƒ¬ãƒƒã‚¸ç”Ÿæˆ                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. GitHub Pagesãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç¢ºèª

mainãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 4.1: ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç¢ºèª
1. Actionsã‚¿ãƒ–ã§ã€Œ**Deploy Dashboard**ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºèª
2. ç·‘ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ âœ… ã«ãªã‚‹ã¾ã§å¾…ã¤ï¼ˆç´„2-3åˆ†ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ— 4.2: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹
```
https://ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å.github.io/jarvis-ml-pipeline/
```

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å†…å®¹
- ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±è¨ˆ
- ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒªãƒ³ã‚¯
- ğŸ“ˆ ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
- ğŸ“‹ ãƒ¡ãƒˆãƒªã‚¯ã‚¹JSON

---

## 5. æ—¥æ¬¡ãƒ»é€±æ¬¡ã‚¸ãƒ§ãƒ–ã®ç¢ºèª

ã“ã‚Œã‚‰ã®ã‚¸ãƒ§ãƒ–ã¯è‡ªå‹•çš„ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
| ã‚¸ãƒ§ãƒ– | å®Ÿè¡Œæ™‚é–“ (JST) |
|--------|---------------|
| æ—¥æ¬¡ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | æ¯æ—¥ 18:00 |
| é€±æ¬¡ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ | æ¯é€±æ—¥æ›œ 18:00 |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ» | æ¯æ—¥ 18:00 |

### æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•
1. Actions â†’ ã€Œ**Scheduled Jobs**ã€ã‚’é¸æŠ
2. ã€Œ**Run workflow**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. Branch: `main`
4. ã€Œ**Run workflow**ã€

### çµæœã®ç¢ºèª
1. å®Œäº†ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œ**Artifacts**ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§çµæœã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:
   - `health-report-xxx` - ãƒ˜ãƒ«ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
   - `benchmark-xxx` - ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœ
   - `security-audit-xxx` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»

---

## 6. æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œ

æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ‰‹å‹•ã§å®Ÿè¡Œã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 6.1: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é–‹ã
1. Actions â†’ ã€Œ**Manual Deploy**ã€

### ã‚¹ãƒ†ãƒƒãƒ— 6.2: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥åŠ›
1. ã€Œ**Run workflow**ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ä»¥ä¸‹ã‚’å…¥åŠ›:
   - **environment**: `staging` ã¾ãŸã¯ `production`
   - **version**: ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: `v4.4.0`ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ— 6.3: æ‰¿èªï¼ˆProductionã®å ´åˆï¼‰
Productionç’°å¢ƒã¯Environment protection rulesã§ä¿è­·ã§ãã¾ã™:
1. Settings â†’ Environments â†’ production
2. Required reviewers ã‚’è¿½åŠ 
3. ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«æ‰¿èªãŒå¿…è¦ã«ãªã‚‹

---

## 7. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµæœç¢ºèª

### æˆåŠŸã—ãŸå ´åˆ âœ…
- ç·‘ã®ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ã€ŒArtifactsã€ã‹ã‚‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½

### å¤±æ•—ã—ãŸå ´åˆ âŒ
1. å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å¤±æ•—ã—ãŸã‚¸ãƒ§ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ­ã‚°ã‚’å±•é–‹ã—ã¦è©³ç´°ã‚’ç¢ºèª

### ãƒ­ã‚°ã®è¦‹æ–¹
```
> Run pytest -m core
============================= test session starts =============================
platform linux -- Python 3.11.x
collected 100 items

tests/test_xxx.py ........ [  8%]
tests/test_yyy.py ........ [ 16%]
...
========================= 95 passed, 5 skipped in 10.5s =======================
```

---

## 8. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: ãƒ—ãƒƒã‚·ãƒ¥ã§ããªã„
```
error: failed to push some refs to 'github.com:xxx/yyy.git'
```

**è§£æ±ºç­–**:
```powershell
# ãƒªãƒ¢ãƒ¼ãƒˆã®å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€
git pull origin main --rebase
git push origin main
```

### å•é¡Œ: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œãªã„
**è§£æ±ºç­–**:
- `.github/workflows/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª

### å•é¡Œ: ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
**è§£æ±ºç­–**:
1. Actions â†’ å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ ãƒ­ã‚°ã‚’ç¢ºèª
2. ãƒ­ãƒ¼ã‚«ãƒ«ã§åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ:
   ```powershell
   .venv\Scripts\python.exe -m pytest -m core -v
   ```

### å•é¡Œ: GitHub Pages ãŒæ›´æ–°ã•ã‚Œãªã„
**è§£æ±ºç­–**:
1. Settings â†’ Pages ã§ GitHub Actions ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. Actions â†’ Deploy Dashboard ãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```powershell
# ã™ã¹ã¦ã‚’ãƒ—ãƒƒã‚·ãƒ¥
git add . && git commit -m "update" && git push

# ç‰¹å®šã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
gh run list --workflow=full-environment.yml

# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ‰‹å‹•å®Ÿè¡Œï¼ˆGitHub CLIï¼‰
gh workflow run full-environment.yml

# æœ€æ–°ã®å®Ÿè¡Œãƒ­ã‚°ã‚’è¡¨ç¤º
gh run view --log
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… ã‚³ãƒ¼ãƒ‰ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥
2. âœ… Actionsã‚¿ãƒ–ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç¢ºèª
3. âœ… Full Environmentã‚’æ‰‹å‹•å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆ
4. âœ… GitHub Pagesã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª
5. âœ… å®šæœŸå®Ÿè¡Œã®çµæœã‚’ç›£è¦–
