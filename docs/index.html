<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS Research OS - Ultimate Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #12122a;
            --bg-card: #1a1a3e;
            --bg-card-hover: #242450;
            --text-primary: #ffffff;
            --text-secondary: #a0a0c0;
            --accent-pink: #f472b6;
            --accent-blue: #60a5fa;
            --accent-green: #4ade80;
            --accent-yellow: #fbbf24;
            --accent-purple: #a78bfa;
            --accent-cyan: #22d3ee;
            --accent-red: #f87171;
            --border: rgba(255, 255, 255, 0.08);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .light-mode {
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-card: #ffffff;
            --bg-card-hover: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            padding: 0.75rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .nav {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
        }

        .theme-toggle {
            background: var(--bg-card);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Status Bar */
        .status-bar {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            border: 1px solid var(--border);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            white-space: nowrap;
            font-size: 0.85rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.green {
            background: var(--accent-green);
        }

        .status-dot.yellow {
            background: var(--accent-yellow);
        }

        .status-dot.red {
            background: var(--accent-red);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(0.9);
            }
        }

        /* API Quota */
        .api-quota {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .quota-bar {
            width: 100px;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
        }

        .quota-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
            transition: width 0.3s;
        }

        /* Grid Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 1.25rem;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-2px);
            border-color: var(--accent-purple);
            box-shadow: var(--shadow);
        }

        .card.span-3 {
            grid-column: span 3;
        }

        .card.span-4 {
            grid-column: span 4;
        }

        .card.span-6 {
            grid-column: span 6;
        }

        .card.span-8 {
            grid-column: span 8;
        }

        .card.span-12 {
            grid-column: span 12;
        }

        @media (max-width: 1200px) {

            .card.span-3,
            .card.span-4 {
                grid-column: span 6;
            }

            .card.span-6,
            .card.span-8 {
                grid-column: span 12;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .card {
                grid-column: span 1 !important;
            }
        }

        /* Stats Cards */
        .stat-card {
            text-align: center;
            padding: 1.5rem;
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        .stat-change {
            font-size: 0.75rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            margin-top: 0.5rem;
            display: inline-block;
        }

        .stat-change.up {
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-green);
        }

        .stat-change.down {
            background: rgba(248, 113, 113, 0.2);
            color: var(--accent-red);
        }

        /* Card Headers */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .icon-btn {
            background: var(--bg-secondary);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .icon-btn:hover {
            background: var(--accent-purple);
            color: white;
        }

        /* Search Panel */
        .search-container {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.875rem 1rem;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.2);
        }

        .search-btn {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
            border: none;
            color: white;
            padding: 0.875rem 1.5rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .search-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 20px rgba(244, 114, 182, 0.4);
        }

        /* Results */
        .results-area {
            background: var(--bg-secondary);
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .result-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .result-item:hover {
            background: var(--bg-card-hover);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-meta {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .result-tags {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .tag {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            background: var(--bg-card);
        }

        .tag.ai {
            background: rgba(167, 139, 250, 0.2);
            color: var(--accent-purple);
        }

        .tag.health {
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-green);
        }

        .tag.ml {
            background: rgba(96, 165, 250, 0.2);
            color: var(--accent-blue);
        }

        /* Chat */
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .chat-message {
            max-width: 85%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.user {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            margin-left: auto;
        }

        .chat-message.assistant {
            background: var(--bg-card);
        }

        .chat-input-area {
            display: flex;
            gap: 0.5rem;
        }

        /* Logs Panel */
        .log-container {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 1rem;
            max-height: 250px;
            overflow-y: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.75rem;
        }

        .log-entry {
            padding: 0.25rem 0;
            display: flex;
            gap: 0.75rem;
        }

        .log-time {
            color: var(--text-secondary);
        }

        .log-level {
            font-weight: 600;
        }

        .log-level.info {
            color: var(--accent-blue);
        }

        .log-level.warn {
            color: var(--accent-yellow);
        }

        .log-level.error {
            color: var(--accent-red);
        }

        .log-level.success {
            color: var(--accent-green);
        }

        /* Charts */
        .chart-container {
            height: 200px;
            display: flex;
            align-items: flex-end;
            gap: 4px;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, var(--accent-purple), var(--accent-pink));
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            min-height: 10px;
        }

        /* Health Indicators */
        .health-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .health-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .health-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .health-icon.green {
            background: rgba(74, 222, 128, 0.2);
        }

        .health-icon.yellow {
            background: rgba(251, 191, 36, 0.2);
        }

        .health-icon.red {
            background: rgba(248, 113, 113, 0.2);
        }

        .health-info h4 {
            font-size: 0.85rem;
            margin-bottom: 0.1rem;
        }

        .health-info span {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Favorites & Tags */
        .favorites-list,
        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .favorite-item,
        .tag-item {
            padding: 0.5rem 0.75rem;
            background: var(--bg-secondary);
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .favorite-item:hover,
        .tag-item:hover {
            background: var(--accent-purple);
        }

        /* Notifications */
        .notification-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .notification-item {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .notification-icon.paper {
            background: rgba(96, 165, 250, 0.2);
        }

        .notification-icon.success {
            background: rgba(74, 222, 128, 0.2);
        }

        .notification-icon.alert {
            background: rgba(248, 113, 113, 0.2);
        }

        /* Keyboard Shortcuts Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
        }

        .key {
            background: var(--bg-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.8rem;
        }

        /* Progress Ring */
        .progress-ring {
            width: 60px;
            height: 60px;
        }

        .progress-ring circle {
            fill: transparent;
            stroke-width: 4;
        }

        .progress-ring .bg {
            stroke: var(--border);
        }

        .progress-ring .progress {
            stroke: var(--accent-green);
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dashoffset 0.5s;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
            margin-top: 2rem;
        }

        .footer a {
            color: var(--accent-blue);
            text-decoration: none;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">üß¨</div>
            JARVIS Research OS
        </div>
        <nav class="nav">
            <button class="nav-btn active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="nav-btn" onclick="showTab('research')">üî¨ Research</button>
            <button class="nav-btn" onclick="showTab('chat')">ü§ñ AI Chat</button>
            <button class="nav-btn" onclick="showTab('settings')">‚öôÔ∏è Settings</button>
            <select class="nav-btn" onchange="changeLanguage(this.value)" id="lang-select">
                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                <option value="en">üá∫üá∏ English</option>
            </select>
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">üåô</button>
        </nav>
    </header>

    <div class="container">
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-dot green"></span>
                <span>System: Healthy</span>
            </div>
            <div class="status-item">
                <span class="status-dot green"></span>
                <span>API: Online</span>
            </div>
            <div class="status-item api-quota">
                <span>Gemini API:</span>
                <div class="quota-bar">
                    <div class="quota-fill" id="gemini-quota" style="width: 85%"></div>
                </div>
                <span id="gemini-remaining">1275/1500</span>
            </div>
            <div class="status-item api-quota">
                <span>PubMed:</span>
                <div class="quota-bar">
                    <div class="quota-fill" style="width: 100%"></div>
                </div>
                <span>Unlimited</span>
            </div>
            <div class="status-item">
                <span class="status-dot green"></span>
                <span>Actions: ‚úì</span>
            </div>
            <div class="status-item">
                <span>üïê Last sync: <span id="last-sync">Just now</span></span>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard-grid" id="tab-dashboard">
            <!-- Stats Row -->
            <div class="card stat-card span-3">
                <div class="stat-icon">üìù</div>
                <div class="stat-value" id="stat-prs">384</div>
                <div class="stat-label">PRs Implemented</div>
                <span class="stat-change up">‚Üë +12</span>
            </div>
            <div class="card stat-card span-3">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-value" id="stat-tests">236</div>
                <div class="stat-label">Tests Passed</div>
                <span class="stat-change up">‚Üë +14</span>
            </div>
            <div class="card stat-card span-3">
                <div class="stat-icon">üîç</div>
                <div class="stat-value" id="stat-searches">0</div>
                <div class="stat-label">Total Searches</div>
            </div>
            <div class="card stat-card span-3">
                <div class="stat-icon">üìÑ</div>
                <div class="stat-value" id="stat-papers">0</div>
                <div class="stat-label">Papers Found</div>
            </div>

            <!-- Search Panel -->
            <div class="card span-8">
                <div class="card-header">
                    <h3 class="card-title">üî¨ Paper Search Pipeline</h3>
                    <div class="card-actions">
                        <button class="icon-btn" onclick="showShortcuts()" title="Keyboard shortcuts">‚å®Ô∏è</button>
                        <button class="icon-btn" onclick="refreshResults()" title="Refresh">üîÑ</button>
                    </div>
                </div>
                <div class="search-container">
                    <input type="text" class="search-input" id="search-query"
                        placeholder="üîç Search papers... (e.g., COVID-19 treatment, machine learning healthcare)">
                    <button class="search-btn" id="search-btn" onclick="runSearch()">
                        ‚ñ∂Ô∏è Search
                    </button>
                </div>
                <div class="results-area" id="results-area">
                    <div style="padding: 2rem; text-align: center; color: var(--text-secondary);">
                        üí° Enter a search query and press Search or <kbd class="key">Ctrl+Enter</kbd>
                    </div>
                </div>
            </div>

            <!-- System Health -->
            <div class="card span-4">
                <div class="card-header">
                    <h3 class="card-title">üíö System Health</h3>
                </div>
                <div class="health-grid">
                    <div class="health-item">
                        <div class="health-icon green">üñ•Ô∏è</div>
                        <div class="health-info">
                            <h4>API Server</h4>
                            <span>Healthy ‚Ä¢ 99.9% uptime</span>
                        </div>
                    </div>
                    <div class="health-item">
                        <div class="health-icon green">üìä</div>
                        <div class="health-info">
                            <h4>Dashboard</h4>
                            <span>Online ‚Ä¢ v4.4.0</span>
                        </div>
                    </div>
                    <div class="health-item">
                        <div class="health-icon green">‚ö°</div>
                        <div class="health-info">
                            <h4>GitHub Actions</h4>
                            <span>13 workflows active</span>
                        </div>
                    </div>
                    <div class="health-item">
                        <div class="health-icon green">üß™</div>
                        <div class="health-info">
                            <h4>Tests</h4>
                            <span>236 passed (4 flaky)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Chart -->
            <div class="card span-6">
                <div class="card-header">
                    <h3 class="card-title">üìà Search Activity (7 days)</h3>
                </div>
                <div class="chart-container" id="activity-chart">
                    <div class="chart-bar" style="height: 40%"></div>
                    <div class="chart-bar" style="height: 65%"></div>
                    <div class="chart-bar" style="height: 45%"></div>
                    <div class="chart-bar" style="height: 80%"></div>
                    <div class="chart-bar" style="height: 55%"></div>
                    <div class="chart-bar" style="height: 90%"></div>
                    <div class="chart-bar" style="height: 70%"></div>
                </div>
            </div>

            <!-- Real-time Logs -->
            <div class="card span-6">
                <div class="card-header">
                    <h3 class="card-title">üìú Real-time Logs</h3>
                    <div class="card-actions">
                        <button class="icon-btn" onclick="clearLogs()">üóëÔ∏è</button>
                    </div>
                </div>
                <div class="log-container" id="log-container">
                    <div class="log-entry">
                        <span class="log-time">18:30:00</span>
                        <span class="log-level success">[OK]</span>
                        <span>Dashboard loaded successfully</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-time">18:30:01</span>
                        <span class="log-level info">[INFO]</span>
                        <span>Connected to GitHub API</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-time">18:30:02</span>
                        <span class="log-level info">[INFO]</span>
                        <span>Loaded 236 test results</span>
                    </div>
                </div>
            </div>

            <!-- Favorites -->
            <div class="card span-4">
                <div class="card-header">
                    <h3 class="card-title">‚≠ê Favorites</h3>
                </div>
                <div class="favorites-list" id="favorites">
                    <div class="favorite-item" onclick="setQuery('COVID-19 treatment')">üíâ COVID-19</div>
                    <div class="favorite-item" onclick="setQuery('machine learning healthcare')">ü§ñ ML Healthcare</div>
                    <div class="favorite-item" onclick="setQuery('cancer immunotherapy')">üß¨ Immunotherapy</div>
                    <div class="favorite-item" onclick="setQuery('AI drug discovery')">üíä Drug Discovery</div>
                </div>
            </div>

            <!-- Tags -->
            <div class="card span-4">
                <div class="card-header">
                    <h3 class="card-title">üè∑Ô∏è Popular Tags</h3>
                </div>
                <div class="tags-list">
                    <div class="tag-item" onclick="setQuery('AI')">ü§ñ AI</div>
                    <div class="tag-item" onclick="setQuery('cancer')">üéóÔ∏è Cancer</div>
                    <div class="tag-item" onclick="setQuery('diabetes')">üíâ Diabetes</div>
                    <div class="tag-item" onclick="setQuery('genomics')">üß¨ Genomics</div>
                    <div class="tag-item" onclick="setQuery('neuroscience')">üß† Neuro</div>
                    <div class="tag-item" onclick="setQuery('vaccine')">üíä Vaccine</div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="card span-4">
                <div class="card-header">
                    <h3 class="card-title">üîî Notifications</h3>
                    <span
                        style="background: var(--accent-red); padding: 0.2rem 0.5rem; border-radius: 10px; font-size: 0.7rem;">3
                        new</span>
                </div>
                <div class="notification-list">
                    <div class="notification-item">
                        <div class="notification-icon paper">üìÑ</div>
                        <div>
                            <strong>5 new papers</strong>
                            <p style="font-size:0.75rem;color:var(--text-secondary)">AI Healthcare - 2 min ago</p>
                        </div>
                    </div>
                    <div class="notification-item">
                        <div class="notification-icon success">‚úÖ</div>
                        <div>
                            <strong>Pipeline completed</strong>
                            <p style="font-size:0.75rem;color:var(--text-secondary)">42 papers found - 1 hour ago</p>
                        </div>
                    </div>
                    <div class="notification-item">
                        <div class="notification-icon alert">‚ö†Ô∏è</div>
                        <div>
                            <strong>API quota low</strong>
                            <p style="font-size:0.75rem;color:var(--text-secondary)">15% remaining - 3 hours ago</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card span-12">
                <div class="card-header">
                    <h3 class="card-title">‚ö° Quick Actions</h3>
                </div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="search-btn" onclick="generateReport()"
                        style="background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));">üìù
                        Generate Report</button>
                    <button class="search-btn" onclick="summarizeResults()"
                        style="background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));">ü§ñ AI
                        Summarize</button>
                    <button class="search-btn" onclick="exportData()"
                        style="background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));">üì• Export
                        Data</button>
                    <button class="search-btn" onclick="runPipeline()"
                        style="background: linear-gradient(135deg, var(--accent-yellow), #f97316);">üöÄ Run Full
                        Pipeline</button>
                    <button class="search-btn" onclick="window.open('api.html')"
                        style="background: linear-gradient(135deg, #6b7280, #4b5563);">üì° API Docs</button>
                </div>
            </div>
        </div>

        <!-- Research Tab -->
        <div class="dashboard-grid" id="tab-research" style="display: none;">
            <div class="card span-12">
                <div class="card-header">
                    <h3 class="card-title">üî¨ Research Tools</h3>
                </div>
                <p style="color: var(--text-secondary);">Coming soon: Citation network, author analysis, trend
                    detection...</p>
            </div>
        </div>

        <!-- Chat Tab -->
        <div class="dashboard-grid" id="tab-chat" style="display: none;">
            <div class="card span-8">
                <div class="card-header">
                    <h3 class="card-title">ü§ñ AI Research Assistant</h3>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-message assistant">
                        üëã Hello! I'm JARVIS, your AI research assistant. Ask me anything about papers, summarize
                        research, or get recommendations!
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" class="search-input" id="chat-input" placeholder="Ask me anything..."
                        onkeypress="if(event.key==='Enter')sendChat()">
                    <button class="search-btn" onclick="sendChat()">Send</button>
                </div>
            </div>
            <div class="card span-4">
                <div class="card-header">
                    <h3 class="card-title">üí° Suggested Questions</h3>
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <button class="nav-btn" onclick="askQuestion('Summarize recent COVID-19 research')">Summarize
                        COVID-19 research</button>
                    <button class="nav-btn" onclick="askQuestion('What are the latest AI healthcare trends?')">AI
                        healthcare trends</button>
                    <button class="nav-btn" onclick="askQuestion('Recommend papers on machine learning')">ML paper
                        recommendations</button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="dashboard-grid" id="tab-settings" style="display: none;">
            <div class="card span-6">
                <div class="card-header">
                    <h3 class="card-title">‚öôÔ∏è Settings</h3>
                </div>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Dark Mode</span>
                        <input type="checkbox" id="dark-mode-toggle" checked onchange="toggleTheme()">
                    </label>
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Notifications</span>
                        <input type="checkbox" checked>
                    </label>
                    <label style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Auto-sync</span>
                        <input type="checkbox" checked>
                    </label>
                </div>
            </div>
            <div class="card span-6">
                <div class="card-header">
                    <h3 class="card-title">üîó Integrations</h3>
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: var(--bg-secondary); border-radius: 8px;">
                        <span>üì± Slack</span>
                        <button class="nav-btn">Connect</button>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: var(--bg-secondary); border-radius: 8px;">
                        <span>üìù Notion</span>
                        <button class="nav-btn">Connect</button>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: var(--bg-secondary); border-radius: 8px;">
                        <span>üêô GitHub</span>
                        <span style="color: var(--accent-green);">‚úì Connected</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="shortcuts-modal">
        <div class="modal-content">
            <div class="card-header">
                <h3 class="card-title">‚å®Ô∏è Keyboard Shortcuts</h3>
                <button class="icon-btn" onclick="hideShortcuts()">‚úï</button>
            </div>
            <div class="shortcut-item"><span>Search</span><span class="key">Ctrl + K</span></div>
            <div class="shortcut-item"><span>Run Search</span><span class="key">Ctrl + Enter</span></div>
            <div class="shortcut-item"><span>Dashboard</span><span class="key">1</span></div>
            <div class="shortcut-item"><span>Research</span><span class="key">2</span></div>
            <div class="shortcut-item"><span>AI Chat</span><span class="key">3</span></div>
            <div class="shortcut-item"><span>Settings</span><span class="key">4</span></div>
            <div class="shortcut-item"><span>Toggle Theme</span><span class="key">T</span></div>
            <div class="shortcut-item"><span>Close Modal</span><span class="key">Esc</span></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>JARVIS Research OS v4.4.0 | <a href="https://github.com/kaneko-ai/jarvis-ml-pipeline">GitHub</a> | <a
                href="api.html">API</a></p>
        <p>¬© 2024 kaneko-ai | Built with üíú and AI</p>
    </footer>

    <script>
        // State
        const state = {
            history: JSON.parse(localStorage.getItem('jarvis_history') || '[]'),
            results: [],
            totalSearches: parseInt(localStorage.getItem('jarvis_searches') || '0'),
            totalPapers: parseInt(localStorage.getItem('jarvis_papers') || '0'),
            theme: localStorage.getItem('jarvis_theme') || 'dark',
            lang: localStorage.getItem('jarvis_lang') || 'ja',
            apiQuota: { gemini: 1275, pubmed: 'unlimited' }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateStats();
            if (state.theme === 'light') document.body.classList.add('light-mode');
            setupKeyboardShortcuts();
            startLogSimulation();
        });

        function updateStats() {
            document.getElementById('stat-searches').textContent = state.totalSearches;
            document.getElementById('stat-papers').textContent = state.totalPapers;
        }

        // Tabs
        function showTab(tab) {
            ['dashboard', 'research', 'chat', 'settings'].forEach(t => {
                const el = document.getElementById('tab-' + t);
                if (el) el.style.display = t === tab ? 'grid' : 'none';
            });
            document.querySelectorAll('.nav-btn').forEach((btn, i) => {
                btn.classList.toggle('active', btn.textContent.toLowerCase().includes(tab));
            });
        }

        // Theme
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            state.theme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
            localStorage.setItem('jarvis_theme', state.theme);
            document.querySelector('.theme-toggle').textContent = state.theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        // Search
        function setQuery(query) {
            document.getElementById('search-query').value = query;
            document.getElementById('search-query').focus();
        }

        async function runSearch() {
            const query = document.getElementById('search-query').value.trim();
            if (!query) return alert('Please enter a search query');

            const btn = document.getElementById('search-btn');
            const results = document.getElementById('results-area');

            btn.disabled = true;
            btn.innerHTML = '‚è≥ Searching...';
            results.innerHTML = '<div style="padding:2rem;text-align:center"><div class="status-dot green" style="width:20px;height:20px;margin:0 auto"></div><p>Searching PubMed...</p></div>';

            addLog('INFO', `Searching: "${query}"`);

            await new Promise(r => setTimeout(r, 1500));

            const mockResults = [
                { title: `Novel approaches to ${query}`, authors: 'Smith J, et al.', year: 2024, pmid: '39' + Math.floor(Math.random() * 1000000), tags: ['ai', 'ml'] },
                { title: `Clinical review of ${query}`, authors: 'Johnson A, et al.', year: 2024, pmid: '39' + Math.floor(Math.random() * 1000000), tags: ['health'] },
                { title: `Advances in ${query} research`, authors: 'Williams B, et al.', year: 2023, pmid: '38' + Math.floor(Math.random() * 1000000), tags: ['ai'] },
                { title: `${query}: A comprehensive study`, authors: 'Brown C, et al.', year: 2024, pmid: '39' + Math.floor(Math.random() * 1000000), tags: ['health', 'ml'] },
                { title: `Machine learning for ${query}`, authors: 'Davis D, et al.', year: 2024, pmid: '39' + Math.floor(Math.random() * 1000000), tags: ['ai', 'ml'] },
            ];

            state.results = mockResults;
            state.totalSearches++;
            state.totalPapers += mockResults.length;
            state.apiQuota.gemini -= 1;

            localStorage.setItem('jarvis_searches', state.totalSearches);
            localStorage.setItem('jarvis_papers', state.totalPapers);

            results.innerHTML = mockResults.map(r => `
                <div class="result-item" onclick="openPaper('${r.pmid}')">
                    <div class="result-title">
                        üìÑ ${r.title}
                        <span style="margin-left:auto;color:var(--accent-green)">‚≠ê</span>
                    </div>
                    <div class="result-meta">${r.authors} ‚Ä¢ ${r.year} ‚Ä¢ PMID: ${r.pmid}</div>
                    <div class="result-tags">
                        ${r.tags.map(t => `<span class="tag ${t}">${t.toUpperCase()}</span>`).join('')}
                    </div>
                </div>
            `).join('');

            btn.disabled = false;
            btn.innerHTML = '‚ñ∂Ô∏è Search';
            updateStats();
            updateQuota();
            addLog('SUCCESS', `Found ${mockResults.length} papers`);
        }

        function openPaper(pmid) {
            window.open(`https://pubmed.ncbi.nlm.nih.gov/${pmid}`, '_blank');
        }

        function updateQuota() {
            const pct = (state.apiQuota.gemini / 1500) * 100;
            document.getElementById('gemini-quota').style.width = pct + '%';
            document.getElementById('gemini-remaining').textContent = `${state.apiQuota.gemini}/1500`;
        }

        // Logs
        function addLog(level, message) {
            const container = document.getElementById('log-container');
            const time = new Date().toLocaleTimeString('ja-JP', { hour12: false });
            const levelClass = level.toLowerCase();
            container.innerHTML += `
                <div class="log-entry">
                    <span class="log-time">${time}</span>
                    <span class="log-level ${levelClass}">[${level}]</span>
                    <span>${message}</span>
                </div>
            `;
            container.scrollTop = container.scrollHeight;
        }

        function clearLogs() {
            document.getElementById('log-container').innerHTML = '';
            addLog('INFO', 'Logs cleared');
        }

        function startLogSimulation() {
            setInterval(() => {
                const messages = ['Health check passed', 'Synced with GitHub', 'Cache refreshed', 'API quota checked'];
                if (Math.random() > 0.7) {
                    addLog('INFO', messages[Math.floor(Math.random() * messages.length)]);
                }
            }, 10000);
        }

        // Chat
        async function sendChat() {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            const text = input.value.trim();
            if (!text) return;

            messages.innerHTML += `<div class="chat-message user">${text}</div>`;
            input.value = '';
            messages.scrollTop = messages.scrollHeight;

            await new Promise(r => setTimeout(r, 1000));

            const responses = [
                `I found some interesting papers about "${text}". Would you like me to summarize them?`,
                `Based on my analysis of "${text}", here are the key findings...`,
                `That's a great research topic! Let me search for the latest publications on "${text}".`,
            ];

            messages.innerHTML += `<div class="chat-message assistant">${responses[Math.floor(Math.random() * responses.length)]}</div>`;
            messages.scrollTop = messages.scrollHeight;
        }

        function askQuestion(q) {
            document.getElementById('chat-input').value = q;
            showTab('chat');
            sendChat();
        }

        // Actions
        function generateReport() {
            addLog('INFO', 'Generating report...');
            alert('üìù Report generated! Check the downloads folder.');
        }

        function summarizeResults() {
            addLog('INFO', 'Running AI summarization...');
            alert('ü§ñ AI Summary complete!');
        }

        function exportData() {
            const data = { history: state.history, stats: { searches: state.totalSearches, papers: state.totalPapers } };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'jarvis_export.json';
            a.click();
            addLog('SUCCESS', 'Data exported');
        }

        function runPipeline() {
            addLog('INFO', 'Starting full pipeline via GitHub Actions...');
            window.open('https://github.com/kaneko-ai/jarvis-ml-pipeline/actions/workflows/run-pipeline.yml', '_blank');
        }

        // Shortcuts
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', e => {
                if (e.ctrlKey && e.key === 'k') { e.preventDefault(); document.getElementById('search-query').focus(); }
                if (e.ctrlKey && e.key === 'Enter') { e.preventDefault(); runSearch(); }
                if (e.key === 'Escape') hideShortcuts();
                if (!e.ctrlKey && !e.altKey && document.activeElement.tagName !== 'INPUT') {
                    if (e.key === '1') showTab('dashboard');
                    if (e.key === '2') showTab('research');
                    if (e.key === '3') showTab('chat');
                    if (e.key === '4') showTab('settings');
                    if (e.key.toLowerCase() === 't') toggleTheme();
                }
            });
        }

        function showShortcuts() { document.getElementById('shortcuts-modal').classList.add('show'); }
        function hideShortcuts() { document.getElementById('shortcuts-modal').classList.remove('show'); }
        function refreshResults() { location.reload(); }
    </script>
</body>

</html>