/* ================================================================== */
/*  JARVIS OS — Command Center                                        */
/*  Midnight Command Theme                                            */
/* ================================================================== */

/* ── Reset ──────────────────────────────────────────────────────── */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;line-height:1.6;overflow-x:hidden;-webkit-font-smoothing:antialiased}

/* ── CSS Custom Properties ──────────────────────────────────────── */
:root{
  /* Core palette */
  --bg-0:#070b14;
  --bg-1:#0c1121;
  --bg-2:#111827;
  --bg-3:#1e293b;
  --bg-glass:rgba(15,23,42,.55);
  --bg-glass-hover:rgba(30,41,59,.7);
  --border:rgba(255,255,255,.06);
  --border-hover:rgba(255,255,255,.12);
  --border-active:rgba(129,140,248,.4);

  /* Text */
  --t1:#f1f5f9;
  --t2:#94a3b8;
  --t3:#64748b;
  --t4:#475569;

  /* Accents */
  --indigo:#818cf8;
  --indigo-dim:rgba(129,140,248,.15);
  --violet:#a78bfa;
  --pink:#f472b6;
  --pink-dim:rgba(244,114,182,.15);
  --rose:#fb7185;
  --emerald:#34d399;
  --emerald-dim:rgba(52,211,153,.15);
  --cyan:#22d3ee;
  --cyan-dim:rgba(34,211,238,.15);
  --amber:#fbbf24;
  --amber-dim:rgba(251,191,36,.15);
  --red:#f87171;
  --red-dim:rgba(248,113,113,.15);
  --slate:#94a3b8;

  /* Gradients */
  --grad-primary:linear-gradient(135deg,#818cf8,#f472b6);
  --grad-card:linear-gradient(160deg,rgba(129,140,248,.04),rgba(244,114,182,.02));

  /* Shadows */
  --shadow-sm:0 1px 3px rgba(0,0,0,.4);
  --shadow-md:0 4px 12px rgba(0,0,0,.5);
  --shadow-lg:0 12px 40px rgba(0,0,0,.6);
  --shadow-glow:0 0 24px rgba(129,140,248,.2);

  /* Radius */
  --r-sm:6px;
  --r-md:10px;
  --r-lg:14px;
  --r-xl:20px;

  /* Blur */
  --blur:blur(20px);

  /* Transitions */
  --ease:cubic-bezier(.4,0,.2,1);
  --dur:220ms;

  /* Sizing */
  --sidebar-w:240px;
  --sidebar-w-collapsed:64px;
  --topbar-h:56px;

  /* Font */
  --mono:'JetBrains Mono','Fira Code','SF Mono',monospace;
}

/* ── Theme: Light ───────────────────────────────────────────────── */
body.theme-light{
  --bg-0:#f8fafc;--bg-1:#f1f5f9;--bg-2:#e2e8f0;--bg-3:#cbd5e1;
  --bg-glass:rgba(241,245,249,.8);--bg-glass-hover:rgba(226,232,240,.9);
  --border:rgba(0,0,0,.08);--border-hover:rgba(0,0,0,.14);--border-active:rgba(99,102,241,.4);
  --t1:#0f172a;--t2:#475569;--t3:#64748b;--t4:#94a3b8;
  --grad-card:linear-gradient(160deg,rgba(99,102,241,.04),rgba(244,114,182,.02));
  --shadow-sm:0 1px 3px rgba(0,0,0,.08);--shadow-md:0 4px 12px rgba(0,0,0,.1);
  --shadow-lg:0 12px 40px rgba(0,0,0,.12);--shadow-glow:0 0 24px rgba(99,102,241,.1);
}

/* ── Theme: Ocean ───────────────────────────────────────────────── */
body.theme-ocean{
  --bg-0:#060f1e;--bg-1:#0a1628;--bg-2:#102a4c;--bg-3:#1a3a5c;
  --indigo:#60a5fa;--pink:#38bdf8;--emerald:#2dd4bf;
  --grad-primary:linear-gradient(135deg,#60a5fa,#38bdf8);
}

/* ── Theme: Forest ──────────────────────────────────────────────── */
body.theme-forest{
  --bg-0:#071007;--bg-1:#0a1a0a;--bg-2:#142814;--bg-3:#1e3a1e;
  --indigo:#4ade80;--pink:#86efac;--emerald:#34d399;
  --grad-primary:linear-gradient(135deg,#4ade80,#34d399);
}

/* ── Theme: Sunset ──────────────────────────────────────────────── */
body.theme-sunset{
  --bg-0:#140a07;--bg-1:#1a0f0a;--bg-2:#2d1810;--bg-3:#3d2216;
  --indigo:#fb923c;--pink:#f472b6;--emerald:#fbbf24;
  --grad-primary:linear-gradient(135deg,#fb923c,#f472b6);
}

/* ── Accessibility ──────────────────────────────────────────────── */
body.high-contrast{
  --border:rgba(255,255,255,.25);--t2:#d1d5db;--t3:#9ca3af;
}
body.high-contrast.theme-light{
  --border:rgba(0,0,0,.3);--t2:#1e293b;--t3:#334155;
}
body.reduce-motion *,body.reduce-motion *::before,body.reduce-motion *::after{
  animation-duration:0s!important;transition-duration:0s!important;
}

/* ── Body ───────────────────────────────────────────────────────── */
body{
  background:var(--bg-0);
  color:var(--t1);
  display:flex;
  min-height:100vh;
}

/* ================================================================== */
/*  SIDEBAR                                                           */
/* ================================================================== */
.sidebar{
  position:fixed;top:0;left:0;bottom:0;
  width:var(--sidebar-w);
  background:var(--bg-1);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  z-index:900;
  transition:width var(--dur) var(--ease);
  overflow:hidden;
}
.sidebar.collapsed{width:var(--sidebar-w-collapsed)}
.sidebar.collapsed .nav-label,
.sidebar.collapsed .logo-label{opacity:0;width:0;overflow:hidden}
.sidebar.collapsed .sidebar-collapse-btn span{transform:rotate(180deg)}

.sidebar-logo{
  display:flex;align-items:center;gap:12px;
  padding:18px 16px;
  border-bottom:1px solid var(--border);
  min-height:60px;
}
.logo-svg{width:28px;height:28px;flex-shrink:0}
.logo-label{
  font-weight:800;font-size:.95rem;
  background:var(--grad-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  white-space:nowrap;transition:opacity var(--dur) var(--ease);
}

.sidebar-nav{
  flex:1;overflow-y:auto;overflow-x:hidden;
  padding:8px;
  display:flex;flex-direction:column;gap:2px;
}
.nav-item{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:var(--r-md);
  background:transparent;border:none;
  color:var(--t2);font-size:.875rem;font-weight:500;
  cursor:pointer;transition:all var(--dur) var(--ease);
  white-space:nowrap;text-align:left;width:100%;
}
.nav-item:hover{background:var(--bg-glass-hover);color:var(--t1)}
.nav-item.active{background:var(--indigo-dim);color:var(--indigo);font-weight:600}
.nav-icon{font-size:1.15rem;width:24px;text-align:center;flex-shrink:0}
.nav-label{transition:opacity var(--dur) var(--ease)}

.sidebar-footer{
  padding:10px;border-top:1px solid var(--border);
}
.sidebar-collapse-btn{
  width:100%;padding:8px;border-radius:var(--r-sm);
  background:transparent;border:1px solid var(--border);
  color:var(--t3);cursor:pointer;font-size:.85rem;
  transition:all var(--dur) var(--ease);
}
.sidebar-collapse-btn:hover{background:var(--bg-glass-hover);color:var(--t1)}
.sidebar-collapse-btn span{display:inline-block;transition:transform var(--dur) var(--ease)}

/* ================================================================== */
/*  MAIN                                                              */
/* ================================================================== */
.main{
  margin-left:var(--sidebar-w);
  flex:1;min-height:100vh;
  transition:margin-left var(--dur) var(--ease);
  display:flex;flex-direction:column;
}
body.sidebar-collapsed .main{margin-left:var(--sidebar-w-collapsed)}

/* ================================================================== */
/*  TOPBAR                                                            */
/* ================================================================== */
.topbar{
  position:sticky;top:0;z-index:800;
  height:var(--topbar-h);
  background:var(--bg-1);
  border-bottom:1px solid var(--border);
  backdrop-filter:var(--blur);
  display:flex;align-items:center;gap:12px;
  padding:0 20px;
}
.topbar-hamburger{
  display:none;
  background:none;border:none;color:var(--t1);font-size:1.3rem;cursor:pointer;
}
.topbar-status{display:flex;align-items:center;gap:6px;font-size:.8rem;color:var(--t2)}
.status-dot{
  width:8px;height:8px;border-radius:50%;
  animation:pulse-dot 2s infinite;
}
.status-dot.green{background:var(--emerald);box-shadow:0 0 8px var(--emerald)}
.status-dot.yellow{background:var(--amber);box-shadow:0 0 8px var(--amber)}
.status-dot.red{background:var(--red);box-shadow:0 0 8px var(--red)}
.status-text{font-weight:500}

@keyframes pulse-dot{
  0%,100%{opacity:1;transform:scale(1)}
  50%{opacity:.5;transform:scale(.8)}
}

.topbar-center{flex:1;display:flex;justify-content:center}
.topbar-cmd-trigger{
  display:flex;align-items:center;gap:8px;
  padding:6px 16px;border-radius:var(--r-md);
  background:var(--bg-glass);border:1px solid var(--border);
  color:var(--t3);font-size:.85rem;cursor:pointer;
  transition:all var(--dur) var(--ease);min-width:240px;
}
.topbar-cmd-trigger:hover{border-color:var(--border-hover);background:var(--bg-glass-hover)}
.cmd-hint{display:flex;align-items:center;gap:6px}
.cmd-hint kbd{
  font-size:.7rem;padding:2px 6px;border-radius:4px;
  background:var(--bg-2);border:1px solid var(--border);color:var(--t3);
  font-family:var(--mono);
}

.topbar-right{display:flex;align-items:center;gap:10px}
.topbar-clock{font-size:.8rem;color:var(--t3);font-variant-numeric:tabular-nums;font-family:var(--mono)}
.topbar-quota{display:flex;align-items:center;gap:6px;font-size:.75rem;color:var(--t3)}
.quota-label{font-weight:600;color:var(--t2)}
.quota-bar-mini{width:48px;height:5px;background:var(--bg-3);border-radius:3px;overflow:hidden}
.quota-fill-mini{height:100%;background:var(--grad-primary);border-radius:3px;transition:width .5s var(--ease);width:100%}
.quota-text-mini{font-family:var(--mono);min-width:28px}
.topbar-icon-btn{
  width:32px;height:32px;border-radius:var(--r-sm);
  background:transparent;border:1px solid var(--border);
  color:var(--t2);cursor:pointer;font-size:.9rem;
  display:flex;align-items:center;justify-content:center;
  transition:all var(--dur) var(--ease);
}
.topbar-icon-btn:hover{background:var(--indigo-dim);color:var(--indigo);border-color:var(--border-active)}

/* ================================================================== */
/*  TAB PANELS                                                        */
/* ================================================================== */
.tab-panel{
  display:none;
  padding:20px;
  animation:fadeUp .35s var(--ease);
}
.tab-panel.active{display:block}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1;transform:translateY(0)}
}

/* ================================================================== */
/*  CARDS                                                             */
/* ================================================================== */
.card{
  background:var(--bg-glass);
  backdrop-filter:var(--blur);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  padding:20px;
  transition:border-color var(--dur) var(--ease),box-shadow var(--dur) var(--ease);
}
.card:hover{border-color:var(--border-hover)}
.card-tall{min-height:420px}
.card-head{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:16px;gap:8px;flex-wrap:wrap;
}
.card-title{font-weight:700;font-size:.95rem;color:var(--t1)}

/* ================================================================== */
/*  GRID LAYOUTS                                                      */
/* ================================================================== */
.grid-2col{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;margin-bottom:16px;
}
.card-grid-3{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:16px;margin-bottom:16px;
}

/* ================================================================== */
/*  KPI ROW                                                           */
/* ================================================================== */
.kpi-row{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:12px;margin-bottom:16px;
}
.kpi-card{
  display:flex;align-items:center;gap:12px;
  padding:16px;border-radius:var(--r-lg);
  background:var(--bg-glass);border:1px solid var(--border);
  transition:all var(--dur) var(--ease);
}
.kpi-card:hover{border-color:var(--border-active);box-shadow:var(--shadow-glow);transform:translateY(-2px)}
.kpi-icon{font-size:1.6rem}
.kpi-value{font-size:1.5rem;font-weight:800;color:var(--t1);line-height:1;font-variant-numeric:tabular-nums}
.kpi-label{font-size:.75rem;color:var(--t3);margin-top:2px}

/* ================================================================== */
/*  SYSTEM HEALTH                                                     */
/* ================================================================== */
.health-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.health-item{
  display:flex;align-items:center;gap:8px;
  padding:10px 12px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  font-size:.85rem;transition:all var(--dur) var(--ease);
}
.health-item:hover{border-color:var(--border-active);transform:translateX(3px)}
.h-dot{
  width:8px;height:8px;border-radius:50%;flex-shrink:0;
}
.h-dot.green{background:var(--emerald);box-shadow:0 0 6px var(--emerald)}
.h-dot.yellow{background:var(--amber);box-shadow:0 0 6px var(--amber)}
.h-dot.red{background:var(--red);box-shadow:0 0 6px var(--red)}
.h-name{flex:1;color:var(--t2)}
.h-val{font-weight:600;font-size:.8rem;color:var(--emerald)}

/* ================================================================== */
/*  QUICK ACTIONS                                                     */
/* ================================================================== */
.quick-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:8px;
}
.action-btn{
  padding:12px 10px;border-radius:var(--r-md);
  border:1px solid var(--border);
  background:var(--bg-2);color:var(--t1);
  font-size:.82rem;font-weight:600;cursor:pointer;
  transition:all var(--dur) var(--ease);
  text-align:center;
}
.action-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}
.action-btn.accent-indigo:hover{border-color:var(--indigo);background:var(--indigo-dim);color:var(--indigo)}
.action-btn.accent-pink:hover{border-color:var(--pink);background:var(--pink-dim);color:var(--pink)}
.action-btn.accent-emerald:hover{border-color:var(--emerald);background:var(--emerald-dim);color:var(--emerald)}
.action-btn.accent-cyan:hover{border-color:var(--cyan);background:var(--cyan-dim);color:var(--cyan)}
.action-btn.accent-amber:hover{border-color:var(--amber);background:var(--amber-dim);color:var(--amber)}
.action-btn.accent-violet:hover{border-color:var(--violet);background:rgba(167,139,250,.15);color:var(--violet)}
.action-btn.accent-rose:hover{border-color:var(--rose);background:rgba(251,113,133,.15);color:var(--rose)}
.action-btn.accent-slate:hover{border-color:var(--slate);background:rgba(148,163,184,.15);color:var(--t1)}

/* ================================================================== */
/*  INPUTS & BUTTONS                                                  */
/* ================================================================== */
.input-field{
  width:100%;padding:10px 14px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t1);font-size:.9rem;font-family:inherit;
  transition:all var(--dur) var(--ease);
}
.input-field:focus{outline:none;border-color:var(--indigo);box-shadow:0 0 0 3px var(--indigo-dim)}
.input-field::placeholder{color:var(--t4)}
.textarea{min-height:80px;resize:vertical;font-family:var(--mono);line-height:1.6}
.textarea.tall{min-height:150px}
.input-sm{max-width:120px}
.input-xs{max-width:80px}
.mono{font-family:var(--mono)}

.search-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.search-main{flex:1;min-width:200px}
.search-options{
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;
  margin-top:10px;font-size:.82rem;color:var(--t2);
}
.check-label{display:flex;align-items:center;gap:4px;cursor:pointer}
.check-label input[type="checkbox"]{accent-color:var(--indigo)}
.inline-label{display:flex;align-items:center;gap:4px}
.inline-label .input-sm{max-width:70px;padding:4px 8px;font-size:.82rem}
.search-divider{color:var(--border);user-select:none}

.select-sm{
  padding:6px 10px;border-radius:var(--r-sm);
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t1);font-size:.82rem;cursor:pointer;
  transition:border-color var(--dur);
}
.select-sm:focus{outline:none;border-color:var(--indigo)}

.btn-primary{
  padding:10px 18px;border-radius:var(--r-md);
  background:var(--grad-primary);border:none;
  color:#fff;font-size:.85rem;font-weight:600;cursor:pointer;
  transition:all var(--dur) var(--ease);
  white-space:nowrap;
}
.btn-primary:hover{transform:translateY(-1px);box-shadow:var(--shadow-md),var(--shadow-glow)}
.btn-primary:active{transform:translateY(0)}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none}
.btn-sm{padding:7px 14px;font-size:.8rem}

.btn-ghost{
  padding:10px 18px;border-radius:var(--r-md);
  background:transparent;border:1px solid var(--border);
  color:var(--t2);font-size:.85rem;font-weight:500;cursor:pointer;
  transition:all var(--dur) var(--ease);white-space:nowrap;
}
.btn-ghost:hover{border-color:var(--border-hover);background:var(--bg-glass-hover);color:var(--t1)}
.btn-ghost.active{border-color:var(--indigo);color:var(--indigo);background:var(--indigo-dim)}

.btn-danger{
  padding:10px 18px;border-radius:var(--r-md);
  background:var(--red-dim);border:1px solid rgba(248,113,113,.3);
  color:var(--red);font-size:.85rem;font-weight:600;cursor:pointer;
  transition:all var(--dur) var(--ease);
}
.btn-danger:hover{background:rgba(248,113,113,.25);border-color:var(--red)}

.chip-btn{
  padding:4px 10px;border-radius:var(--r-sm);
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t3);font-size:.75rem;cursor:pointer;
  transition:all var(--dur) var(--ease);
}
.chip-btn:hover{color:var(--t1);border-color:var(--border-hover)}

.btn-row{display:flex;gap:8px;flex-wrap:wrap}
.field-label{display:block;font-size:.8rem;font-weight:600;color:var(--t2);margin:10px 0 4px}

/* Spacing helpers */
.mt-xs{margin-top:4px}.mt-sm{margin-top:10px}.mt-md{margin-top:20px}

/* ================================================================== */
/*  BADGE                                                             */
/* ================================================================== */
.badge{
  display:inline-block;padding:2px 10px;border-radius:20px;
  background:var(--indigo-dim);color:var(--indigo);
  font-size:.75rem;font-weight:600;
}

/* ================================================================== */
/*  RESULTS                                                           */
/* ================================================================== */
.results-area{
  max-height:480px;overflow-y:auto;border-radius:var(--r-md);
}
.result-item{
  padding:12px 14px;border-bottom:1px solid var(--border);
  cursor:pointer;transition:all var(--dur) var(--ease);
}
.result-item:hover{background:var(--bg-glass-hover);padding-left:18px}
.result-item:last-child{border-bottom:none}
.result-item .r-title{font-weight:600;font-size:.9rem;display:flex;align-items:center;gap:6px}
.result-item .r-meta{font-size:.78rem;color:var(--t3);margin-top:2px}
.result-item .r-tags{display:flex;gap:4px;margin-top:6px;flex-wrap:wrap}
.tag{
  font-size:.68rem;padding:2px 8px;border-radius:20px;
  background:var(--bg-3);border:1px solid var(--border);
  color:var(--t2);
}
.tag.ai{background:var(--indigo-dim);color:var(--indigo);border-color:var(--indigo)}
.tag.health{background:var(--emerald-dim);color:var(--emerald);border-color:var(--emerald)}
.tag.ml{background:var(--cyan-dim);color:var(--cyan);border-color:var(--cyan)}
.tag.genomics{background:rgba(167,139,250,.15);color:var(--violet);border-color:var(--violet)}
.tag.covid{background:var(--red-dim);color:var(--red);border-color:var(--red)}

/* ================================================================== */
/*  RESULT BOX (output)                                               */
/* ================================================================== */
.result-box{
  margin-top:12px;padding:14px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  font-size:.85rem;color:var(--t2);min-height:48px;
  transition:border-color var(--dur);
  word-break:break-word;
}
.result-box.mono{font-family:var(--mono);font-size:.8rem;white-space:pre-wrap}
.result-box:empty::after{content:'結果がここに表示されます';color:var(--t4)}

/* ================================================================== */
/*  CHART                                                             */
/* ================================================================== */
.chart-wrap{position:relative;height:200px;padding:4px}
.chart-wrap.chart-sm{height:160px}

/* ================================================================== */
/*  WORD CLOUD                                                        */
/* ================================================================== */
.word-cloud-area{
  min-height:60px;padding:8px;
  display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:2px;
}

/* ================================================================== */
/*  HEATMAP                                                           */
/* ================================================================== */
.heatmap-container{
  display:grid;grid-template-columns:repeat(7,16px);gap:3px;
  justify-content:center;padding:8px 0;
}
.hm-cell{
  width:16px;height:16px;border-radius:3px;
  transition:transform var(--dur);
}
.hm-cell:hover{transform:scale(1.4)}

/* ================================================================== */
/*  RUN SUMMARY                                                       */
/* ================================================================== */
.run-summary-area{min-height:80px}
.run-row{
  display:flex;align-items:center;gap:12px;
  padding:8px 0;border-bottom:1px solid var(--border);
  font-size:.85rem;
}
.run-row:last-child{border-bottom:none}
.run-metric{font-weight:700;color:var(--indigo)}
.run-pass{color:var(--emerald);font-weight:700}
.run-fail{color:var(--red);font-weight:700}

/* ================================================================== */
/*  NOTIFICATIONS                                                     */
/* ================================================================== */
.notif-list{max-height:220px;overflow-y:auto}
.notif-item{
  display:flex;align-items:center;gap:8px;
  padding:8px 10px;border-bottom:1px solid var(--border);
  font-size:.82rem;color:var(--t2);
  transition:background var(--dur);
}
.notif-item:hover{background:var(--bg-glass-hover)}
.notif-icon{font-size:1rem;flex-shrink:0}
.notif-time{margin-left:auto;font-size:.72rem;color:var(--t4);font-family:var(--mono)}

/* ================================================================== */
/*  PIPELINES                                                         */
/* ================================================================== */
.pipeline-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:12px;
}
.pipeline-card{
  padding:16px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  transition:all var(--dur) var(--ease);
}
.pipeline-card:hover{border-color:var(--border-active);transform:translateY(-2px)}
.pl-head{font-weight:700;font-size:.9rem;margin-bottom:8px}
.pl-steps{
  display:flex;align-items:center;gap:4px;flex-wrap:wrap;
  font-size:.75rem;color:var(--t3);margin-bottom:10px;
}
.pl-steps span{padding:2px 6px;border-radius:4px;background:var(--bg-glass)}
.pl-status{margin-top:8px;font-size:.78rem;color:var(--t3)}

.progress-bar-inline{
  width:100%;height:6px;background:var(--bg-3);border-radius:3px;overflow:hidden;margin-top:6px;
}
.progress-bar-inline .fill{
  height:100%;background:var(--grad-primary);border-radius:3px;
  transition:width .4s var(--ease);
}

/* ================================================================== */
/*  GITHUB ACTIONS LINKS                                              */
/* ================================================================== */
.gh-actions-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:8px;
}
.gh-action-link{
  display:flex;align-items:center;gap:6px;
  padding:10px 14px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t2);font-size:.82rem;font-weight:500;
  text-decoration:none;transition:all var(--dur) var(--ease);
}
.gh-action-link:hover{
  border-color:var(--indigo);color:var(--indigo);
  background:var(--indigo-dim);transform:translateY(-1px);
}

/* ================================================================== */
/*  LAB                                                               */
/* ================================================================== */
.equipment-list{display:flex;flex-direction:column;gap:6px}
.eq-item{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  font-size:.85rem;
}
.eq-status{margin-left:auto;font-size:.78rem;font-weight:600}
.eq-status.idle{color:var(--emerald)}
.eq-status.running{color:var(--amber)}

/* ================================================================== */
/*  META-ANALYSIS                                                     */
/* ================================================================== */
.ma-studies-list{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px}
.ma-study-tag{
  padding:6px 10px;border-radius:var(--r-sm);
  background:var(--bg-2);border:1px solid var(--border);
  font-size:.8rem;color:var(--t2);
}
.forest-area{min-height:240px}
.forest-row{
  display:flex;align-items:center;gap:8px;
  margin:6px 0;font-size:.82rem;
}
.forest-label{width:70px;color:var(--t3);flex-shrink:0}
.forest-bar{
  flex:1;height:20px;background:var(--bg-3);border-radius:4px;
  position:relative;
}
.forest-mid{
  position:absolute;left:50%;width:1px;height:100%;
  background:var(--t4);
}
.forest-dot{
  position:absolute;width:10px;height:10px;border-radius:50%;
  background:var(--indigo);top:50%;transform:translate(-50%,-50%);
}

/* ================================================================== */
/*  PRISMA                                                            */
/* ================================================================== */
.prisma-form{display:grid;grid-template-columns:auto 1fr;gap:6px 10px;align-items:center}
.prisma-form .field-label{margin:0}
.prisma-form .input-sm{max-width:100%}
.prisma-preview{min-height:160px;display:flex;align-items:center;justify-content:center}
.prisma-flow{
  display:flex;flex-direction:column;align-items:center;gap:8px;
  font-size:.82rem;color:var(--t1);width:100%;
}
.prisma-box{
  padding:10px 20px;border-radius:var(--r-md);
  background:var(--indigo-dim);border:1px solid var(--indigo);
  text-align:center;min-width:220px;
}
.prisma-arrow{color:var(--t4);font-size:1.2rem}

/* ================================================================== */
/*  CITATION GENERATOR                                                */
/* ================================================================== */
.cite-gen-row{
  display:flex;gap:8px;flex-wrap:wrap;align-items:center;
}
.cite-gen-row .input-field{flex:1;min-width:120px}
.cite-gen-row .input-sm{min-width:100px;flex:0 0 auto}
.cite-gen-row .input-xs{min-width:60px;flex:0 0 auto}

/* ================================================================== */
/*  LOGS                                                              */
/* ================================================================== */
.log-container{
  max-height:360px;overflow-y:auto;
  padding:8px;border-radius:var(--r-md);
  background:var(--bg-2);
  font-family:var(--mono);font-size:.75rem;
}
.log-entry{
  display:flex;gap:8px;padding:3px 0;
  border-bottom:1px dashed var(--border);
}
.log-entry:last-child{border-bottom:none}
.log-time{color:var(--t4);min-width:65px}
.log-level{font-weight:600;min-width:58px}
.log-level.info{color:var(--cyan)}
.log-level.success{color:var(--emerald)}
.log-level.warn{color:var(--amber)}
.log-level.error{color:var(--red)}
.log-msg{color:var(--t2);word-break:break-all}

/* ================================================================== */
/*  COMPLIANCE                                                        */
/* ================================================================== */
.compliance-section{font-size:.9rem}
.compliance-status{
  display:flex;align-items:center;gap:12px;
  padding:14px;border-radius:var(--r-md);
  background:var(--emerald-dim);border:1px solid rgba(52,211,153,.2);
}
.compliance-icon{font-size:2rem}
.compliance-title{font-weight:700;color:var(--emerald)}
.compliance-sub{font-size:.82rem;color:var(--t2)}
.audit-list{font-size:.82rem;max-height:160px;overflow-y:auto}
.audit-item{
  padding:6px 0;border-bottom:1px solid var(--border);
  color:var(--t2);
}

/* ================================================================== */
/*  SETTINGS                                                          */
/* ================================================================== */
.theme-grid{display:flex;gap:8px;flex-wrap:wrap}
.theme-btn{
  padding:8px 14px;border-radius:var(--r-md);
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t2);font-size:.82rem;cursor:pointer;
  transition:all var(--dur) var(--ease);
}
.theme-btn:hover{border-color:var(--border-hover);color:var(--t1)}
.theme-btn.active{border-color:var(--indigo);color:var(--indigo);background:var(--indigo-dim)}

.switch-label{
  display:flex;align-items:center;gap:8px;
  font-size:.85rem;color:var(--t2);padding:4px 0;cursor:pointer;
}
.switch-label input[type="checkbox"]{accent-color:var(--indigo)}

.shortcut-list{display:flex;flex-direction:column;gap:2px}
.shortcut-row{
  display:flex;justify-content:space-between;align-items:center;
  padding:6px 0;border-bottom:1px solid var(--border);
  font-size:.85rem;
}
.shortcut-row:last-child{border-bottom:none}
.shortcut-row kbd{
  padding:3px 8px;border-radius:4px;
  background:var(--bg-2);border:1px solid var(--border);
  font-family:var(--mono);font-size:.75rem;color:var(--t3);
}

.api-status{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 12px;border-radius:20px;
  font-size:.8rem;font-weight:600;
  background:var(--amber-dim);color:var(--amber);
}
.api-status::before{
  content:'';width:7px;height:7px;border-radius:50%;background:currentColor;
}
.api-status.online{background:var(--emerald-dim);color:var(--emerald)}
.api-status.error{background:var(--red-dim);color:var(--red)}

/* ================================================================== */
/*  CHAT DRAWER                                                       */
/* ================================================================== */
.chat-drawer{
  position:fixed;right:-420px;top:0;bottom:0;width:400px;max-width:92vw;
  background:var(--bg-1);border-left:1px solid var(--border);
  backdrop-filter:var(--blur);
  z-index:950;
  display:flex;flex-direction:column;
  transition:right .3s var(--ease);
}
.chat-drawer.open{right:0}
.chat-drawer-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 16px;border-bottom:1px solid var(--border);
}
.chat-messages{
  flex:1;overflow-y:auto;padding:14px;
  display:flex;flex-direction:column;gap:10px;
}
.chat-msg{
  max-width:88%;padding:10px 14px;border-radius:var(--r-lg);
  font-size:.88rem;line-height:1.55;
  animation:msgIn .25s var(--ease);
}
@keyframes msgIn{from{opacity:0;transform:translateY(8px) scale(.97)}to{opacity:1;transform:none}}
.chat-msg.user{
  background:var(--grad-primary);color:#fff;
  align-self:flex-end;border-bottom-right-radius:4px;
}
.chat-msg.assistant{
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t2);align-self:flex-start;border-bottom-left-radius:4px;
}
.chat-input-row{display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--border)}
.chat-input-row .input-field{flex:1}
.chat-suggestions{
  display:flex;gap:6px;padding:0 16px 12px;flex-wrap:wrap;
}
.suggest-btn{
  padding:4px 10px;border-radius:20px;
  background:var(--bg-2);border:1px solid var(--border);
  color:var(--t3);font-size:.72rem;cursor:pointer;
  transition:all var(--dur);
}
.suggest-btn:hover{border-color:var(--indigo);color:var(--indigo)}

/* ================================================================== */
/*  FAB                                                               */
/* ================================================================== */
.fab{
  position:fixed;bottom:24px;right:24px;
  width:52px;height:52px;border-radius:50%;
  background:var(--grad-primary);border:none;
  color:#fff;font-size:1.3rem;cursor:pointer;
  box-shadow:var(--shadow-lg),0 0 20px rgba(129,140,248,.35);
  display:flex;align-items:center;justify-content:center;
  transition:all var(--dur) var(--ease);
  z-index:940;
}
.fab:hover{transform:scale(1.1) rotate(8deg);box-shadow:var(--shadow-lg),0 0 30px rgba(129,140,248,.5)}
body.chat-open .fab{opacity:0;pointer-events:none}

/* ================================================================== */
/*  COMMAND PALETTE                                                   */
/* ================================================================== */
.cmd-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);backdrop-filter:blur(4px);
  z-index:2000;display:none;
  align-items:flex-start;justify-content:center;
  padding-top:18vh;
}
.cmd-overlay.show{display:flex}
.cmd-palette{
  width:92%;max-width:560px;
  background:var(--bg-1);border:1px solid var(--border);
  border-radius:var(--r-xl);overflow:hidden;
  box-shadow:var(--shadow-lg);
  animation:cmdIn .2s var(--ease);
}
@keyframes cmdIn{from{opacity:0;transform:scale(.96) translateY(-10px)}to{opacity:1;transform:none}}
.cmd-input{
  width:100%;padding:16px 20px;
  background:transparent;border:none;border-bottom:1px solid var(--border);
  color:var(--t1);font-size:1rem;
}
.cmd-input:focus{outline:none}
.cmd-results{max-height:280px;overflow-y:auto}
.cmd-item{
  display:flex;align-items:center;gap:12px;
  padding:10px 20px;cursor:pointer;
  transition:background var(--dur);
  font-size:.9rem;color:var(--t2);
}
.cmd-item:hover,.cmd-item.selected{background:var(--bg-glass-hover);color:var(--t1)}
.cmd-item-icon{width:24px;text-align:center;font-size:1.05rem}
.cmd-item-label{flex:1}
.cmd-item-shortcut{font-size:.72rem;color:var(--t4);font-family:var(--mono)}

/* ================================================================== */
/*  TOAST                                                             */
/* ================================================================== */
.toast-container{
  position:fixed;top:70px;right:20px;
  display:flex;flex-direction:column;gap:8px;
  z-index:3000;pointer-events:none;
}
.toast{
  display:flex;align-items:center;gap:8px;
  padding:10px 16px;border-radius:var(--r-md);
  background:var(--bg-1);border:1px solid var(--border);
  backdrop-filter:var(--blur);
  color:var(--t1);font-size:.85rem;
  box-shadow:var(--shadow-md);
  pointer-events:auto;
  animation:toastIn .3s var(--ease),toastOut .3s var(--ease) 2.7s forwards;
}
@keyframes toastIn{from{opacity:0;transform:translateX(40px)}to{opacity:1;transform:none}}
@keyframes toastOut{to{opacity:0;transform:translateX(40px)}}
.toast.success{border-left:3px solid var(--emerald)}
.toast.error{border-left:3px solid var(--red)}
.toast.info{border-left:3px solid var(--cyan)}
.toast.warn{border-left:3px solid var(--amber)}

/* ================================================================== */
/*  EMPTY / PLACEHOLDER                                               */
/* ================================================================== */
.empty-msg{
  text-align:center;padding:24px;
  color:var(--t4);font-size:.88rem;
}
.viewer-placeholder{
  min-height:200px;display:flex;align-items:center;justify-content:center;
  color:var(--t4);font-size:.9rem;border-radius:var(--r-md);
  background:var(--bg-2);border:1px dashed var(--border);
}

/* ================================================================== */
/*  SUB-SECTIONS                                                      */
/* ================================================================== */
.sub-section{margin-bottom:16px}
.sub-title{font-size:.8rem;font-weight:600;color:var(--t3);margin-bottom:6px}
.tags-area{display:flex;flex-wrap:wrap;gap:4px}

/* ================================================================== */
/*  PROTEIN VIEWER                                                    */
/* ================================================================== */
#protein-viewer a{
  display:inline-block;padding:8px 16px;border-radius:var(--r-md);
  background:var(--grad-primary);color:#fff;text-decoration:none;
  font-size:.85rem;font-weight:600;margin-top:8px;
}

/* ================================================================== */
/*  SCROLLBAR                                                         */
/* ================================================================== */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--bg-3);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--t4)}

/* ================================================================== */
/*  RESPONSIVE                                                        */
/* ================================================================== */
@media(max-width:1100px){
  .grid-2col{grid-template-columns:1fr}
}

@media(max-width:768px){
  .sidebar{
    transform:translateX(-100%);
    width:260px;
    z-index:1000;
  }
  .sidebar.mobile-open{transform:translateX(0)}
  .main{margin-left:0!important}
  .topbar-hamburger{display:block}
  .topbar-cmd-trigger{min-width:auto}
  .cmd-hint{display:none}
  .kpi-row{grid-template-columns:repeat(auto-fit,minmax(130px,1fr))}
  .quick-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
  .pipeline-grid{grid-template-columns:1fr}
  .gh-actions-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
  .chat-drawer{width:100%;max-width:100%}
  .fab{bottom:16px;right:16px;width:48px;height:48px}
  .cite-gen-row{flex-direction:column}
  .cite-gen-row .input-field,.cite-gen-row .input-sm,.cite-gen-row .input-xs{min-width:100%;flex:1}
  .prisma-form{grid-template-columns:1fr}
  .health-grid{grid-template-columns:1fr}
  .search-row{flex-direction:column}
  .search-main{min-width:100%}
}

@media(max-width:480px){
  .kpi-row{grid-template-columns:1fr 1fr}
  .kpi-card{padding:12px}
  .kpi-value{font-size:1.2rem}
  .tab-panel{padding:12px}
  .topbar{padding:0 12px}
}

/* ================================================================== */
/*  PRINT                                                             */
/* ================================================================== */
@media print{
  .sidebar,.topbar,.fab,.chat-drawer,.toast-container,.cmd-overlay{display:none!important}
  .main{margin-left:0!important}
  body{background:#fff;color:#000}
  .card{box-shadow:none;border:1px solid #ddd;break-inside:avoid}
}
